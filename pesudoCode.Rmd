Loop for each episode, $i = 0, 1, 2, ...$, : 

//determine $\pi_i$ given $Q_{i-1}$ and curiosity $C_i$  
$$\pi_i(Wait, S_t) = \frac{1}{exp\left[ tau \cdot Q(Quit, S_t) - Q(Wait, S_t) - C_i \right]}$$

Loop for each step, $t = 0, 1, 2, ...$:  
Unless $S_{t+1}$ is terminal // either get a reward or quit  
Choose and take $A_t$, observe $S_{t+1}$ and $R_{t+1}$  

$T_i$ = t+1 // total steps spent in the episode (if we want to quit at the begining, $T_i = t-1$ if $A_t = Quit$)

Loop for each step of episode, $t = 0, 1, 2, ..., T_iÔºç1$:  
$G_t = \sum_{k= t+1}^{T_i} \gamma^{k-t-1} R_{k} + \gamma^{T_i- t}V_{i-1}(S_{iti})$     
$Q_{i}(S_t, A_t) = Q_{i-1}(S_t, A_t) + \alpha(G_t - Q_{i-1}(S_t, A_t))$

// update $V(S_{iti})$  
$V_{i}(S_{iti}) = V_{i-1}(S_{iti}) + \alpha(\gamma^{\tau_{iti}}G_t - V_{i}(S_{iti}))$

//counterfactual thinking
// bellman backup can not be implemented incrementally 
$Q_{i}(Quit) = Q_{i-1}(Quit) + \alpha(\gamma^{\tau_{iti}+1}G_t - Q_{i}(Quit))$
